<!-- ForwardResponse_v10 BPEL Process [Generated by the Oracle BPEL Designer]  -->
<process name="ForwardResponse_v10" targetNamespace="http://emayor.org/ForwardResponse_v10" suppressJoinFailure="yes" xmlns="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:tns="http://emayor.org/ForwardResponse_v10" xmlns:nsxml1="http://www.emayor.org/eMayorServiceRequest.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:nsxml2="http://eMayor.org/sh/bpel/forward/data" xmlns:bpelx="http://schemas.oracle.com/bpel/extension" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:nsxml0="http://eMayor.org/sh/bpel/forward/service"><!-- ================================================================= --><!-- PARTNERLINKS                                                      --><!-- List of services participating in this BPEL process               --><!-- ================================================================= -->
 <partnerLinks><!--
        The 'client' role represents the requester of this service. It is 
        used for callback. The location and correlation information associated
        with the client role are automatically set using WS-Addressing.
        -->
  <partnerLink name="client" partnerLinkType="tns:ForwardResponse_v10" myRole="ForwardResponse_v10Provider" partnerRole="ForwardResponse_v10Requester"/>
  <partnerLink name="forwardPL" partnerLinkType="nsxml0:IForwardManagerBPELService" partnerRole="IForwardManagerBPELServiceProvider"/>
 </partnerLinks><!-- ================================================================= --><!-- VARIABLES                                                         --><!-- List of messages and XML documents used within this BPEL process  --><!-- ================================================================= -->
 <variables><!-- Reference to the message passed as input during initiation -->
  <variable name="input" messageType="tns:ForwardResponse_v10RequestMessage"/><!-- Reference to the message that will be sent back to the 
             requester during callback
             -->
  <variable name="output" messageType="tns:ForwardResponse_v10ResponseMessage"/>
 </variables><!-- ================================================================= --><!-- ORCHESTRATION LOGIC                                               --><!-- Set of activities coordinating the flow of messages across the    --><!-- services integrated within this business process                  --><!-- ================================================================= -->
 <sequence name="main"><!-- Receive input from requestor. 
             Note: This maps to operation defined in ForwardResponse_v10.wsdl 
             -->
  <receive name="receiveInput" partnerLink="client" portType="tns:ForwardResponse_v10" operation="initiate" variable="input" createInstance="yes"/><!-- Asynchronous callback to the requester.
             Note: the callback location and correlation id is transparently handled 
             using WS-addressing.
             -->
  <scope name="ForwardResponse">
   <variables>
    <variable name="forwardIn" messageType="nsxml0:forwardResponseRequest"/>
   </variables>
   <sequence>
    <assign name="prepareInput">
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:uid"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:uid"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:ssid"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:ssid"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:reqestDocument"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:document"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:extraField1"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:document1"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:extraField2"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:document2"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:extraField3"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:document3"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:extraField4"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:remoteMunicipalityId"/>
     </copy>
     <copy>
      <from variable="input" part="payload" query="/tns:ForwardResponse_v10Request/nsxml1:serviceId"/>
      <to variable="forwardIn" part="fResponse" query="/nsxml0:fResponse/nsxml2:serviceId"/>
     </copy>
    </assign>
    <invoke name="invoke-1" partnerLink="forwardPL" portType="nsxml0:IForwardManagerBPEL" operation="forwardResponse" inputVariable="forwardIn"/>
    <assign name="prepareOutput">
     <copy>
      <from expression="'OK'"/>
      <to variable="output" part="payload" query="/tns:ForwardResponse_v10Response"/>
     </copy>
    </assign>
   </sequence>
  </scope>
  <invoke name="callbackClient" partnerLink="client" portType="tns:ForwardResponse_v10Callback" operation="onResult" inputVariable="output"/>
 </sequence>
</process>
